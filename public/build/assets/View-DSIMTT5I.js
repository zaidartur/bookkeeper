import{k as Y,l as c,x as Z,G as $,r as v,f as D,o as d,a as i,b as a,u as o,s as ee,g as le,w as p,c as f,h as m,e as b,t as k,F as ae}from"./app-B8y3jIa7.js";import{s as se}from"./index-B7id7D6o.js";import{h as te,o as oe,s as T,p as J,u as L,d as N,n as R}from"./types-B6ugmKAV.js";import{s as A}from"./index-CtGM5BF0.js";const ie={id:"features",class:"py-6 px-6 lg:px-20 mt-0 mx-0 lg:mx-40"},ne={class:"card flex flex-wrap gap-4"},ue={class:"flex-auto"},re={class:"flex-auto"},de={class:"card flex flex-wrap gap-4 -mt-20"},me={class:"flex-auto"},ce={class:"flex-auto"},pe=["onClick"],fe={class:"card flex flex-wrap gap-4 -mt-20"},ge={class:"flex-auto"},ve={class:"flex-auto"},be={class:"card flex flex-wrap gap-4 -mt-20"},ke={class:"flex-auto"},ye={class:"flex-auto"},xe={class:"card flex flex-wrap gap-4 -mt-20"},we={class:"flex-auto justify-items-center"},_e=["src"],je={class:"flex-auto justify-items-center"},Ve=["src"],Te={class:"card flex flex-wrap gap-4 -mt-16 justify-items-center"},Ce={class:"card flex flex-wrap gap-4 -mt-12 justify-items-center"},De={class:"flex-auto gap-4 text-center"},ze={__name:"View",setup(Fe){const w=Y(),F=c(!1),g=c(!1),t=Z({uuid:"",judul:"",deskripsi:"",tanggal:null,jam:null,lokasi:"",alur:"",problem:"",petugas:"",foto_awal:null,foto_akhir:null});$(()=>{C()});const E=c({judul:"",tanggal:null,jam:null,lokasi:"",alur:"",petugas:""}),H=c(te(oe({judul:T().min(1,{message:"Judul wajib diisi."}),tanggal:J(s=>s===""||s===null?null:new Date(s),L([N(),R().refine(s=>s!==null,{message:"Tanggal Mulai wajib diisi"})])),jam:J(s=>s===""||s===null?null:new Date(s),L([N(),R().refine(s=>s!==null,{message:"Jam Mulai wajib diisi"})])),lokasi:T().min(1,{message:"Lokasi wajib diisi."}),alur:T().min(1,{message:"Alur wajib diisi."}),petugas:T().min(1,{message:"Petugas wajib diisi."})}))),y=c(null),_=c(!1);function O(s){const e=s.files[0],n=new FileReader;n.onload=async u=>{y.value=u.target.result,t.foto_awal=u.target.result,_.value=!0},n.readAsDataURL(e)}function G(){y.value=null,t.foto_awal=null,_.value=!1}const x=c(null),j=c(!1);function K(s){const e=s.files[0],n=new FileReader;n.onload=async u=>{x.value=u.target.result,t.foto_akhir=u.target.result,j.value=!0},n.readAsDataURL(e)}function q(){x.value=null,t.foto_akhir=null,j.value=!1}const C=()=>{t.reset(),F.value=!0,y.value=null,_.value=!1,x.value=null,j.value=!1},Q=({valid:s})=>{s?(g.value=!0,t.post("/maintenance/save",{resetOnSuccess:!0,onSuccess:e=>{const n=e.props.flash.message;W(n),C(),g.value=!1},onError:()=>{w.add({severity:"error",summary:"Peringatan",detail:"Terjadi kesalahan pada sistem",life:3e3})}})):w.add({severity:"warn",summary:"Peringatan",detail:"Mohon isi semua data yang diwajibkan!",life:3e3})},W=s=>{s.status==="failed"?w.add({severity:"error",summary:"Error",detail:s.msg,life:3e3}):s.status==="success"&&w.add({severity:"success",summary:"Berhasil",detail:s.msg,life:3e3})};return(s,e)=>{const n=v("InputText"),u=v("Message"),h=v("DatePicker"),M=v("Textarea"),V=v("Button"),X=v("Divider");return d(),D(ae,null,[i(o(ee)),i(o(le),{title:"Maintenance"}),a("div",ie,[e[18]||(e[18]=a("div",null,[a("h1",{class:"text-surface-900 dark:text-surface-0 font-normal mb-2 text-4xl text-center"},"Form Maintenance")],-1)),i(o(se),{resolver:H.value,initialValues:E.value,onSubmit:Q,class:"flex flex-col gap-4"},{default:p(r=>{var U,S,z,I,P,B;return[a("div",ne,[a("div",ue,[e[8]||(e[8]=a("label",{for:"",class:"font-bold block"}," Judul ",-1)),i(n,{modelValue:o(t).judul,"onUpdate:modelValue":e[0]||(e[0]=l=>o(t).judul=l),maxlength:"100",placeholder:"Judul Kegiatan",class:"w-full",name:"judul",autofocus:F.value},null,8,["modelValue","autofocus"]),(U=r.judul)!=null&&U.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.judul.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)]),a("div",re,[e[9]||(e[9]=a("label",{for:"",class:"font-bold block"}," Deskripsi (opsional) ",-1)),i(n,{modelValue:o(t).deskripsi,"onUpdate:modelValue":e[1]||(e[1]=l=>o(t).deskripsi=l),maxlength:"100",placeholder:"Deskripsi",class:"w-full",name:"deskripsi"},null,8,["modelValue"])])]),a("div",de,[a("div",me,[e[10]||(e[10]=a("label",{for:"mulai",class:"font-bold block"}," Tanggal Mulai ",-1)),i(h,{modelValue:o(t).tanggal,"onUpdate:modelValue":e[2]||(e[2]=l=>o(t).tanggal=l),showIcon:"",fluid:"",iconDisplay:"input",inputId:"mulai",name:"tanggal"},null,8,["modelValue"]),(S=r.tanggal)!=null&&S.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.tanggal.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)]),a("div",ce,[e[11]||(e[11]=a("label",{for:"jam",class:"font-bold block"},"Jam Mulai ",-1)),i(h,{modelValue:o(t).jam,"onUpdate:modelValue":e[3]||(e[3]=l=>o(t).jam=l),showIcon:"",fluid:"",iconDisplay:"input",timeOnly:"",inputId:"jam",name:"jam"},{inputicon:p(l=>[a("i",{class:"pi pi-clock",onClick:l.clickCallback},null,8,pe)]),_:1},8,["modelValue"]),(z=r.jam)!=null&&z.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.jam.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)])]),a("div",fe,[a("div",ge,[e[12]||(e[12]=a("label",{for:"",class:"font-bold block"}," Lokasi ",-1)),i(n,{modelValue:o(t).lokasi,"onUpdate:modelValue":e[4]||(e[4]=l=>o(t).lokasi=l),placeholder:"Lokasi",maxlength:"100",class:"w-full",name:"lokasi"},null,8,["modelValue"]),(I=r.lokasi)!=null&&I.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.lokasi.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)]),a("div",ve,[e[13]||(e[13]=a("label",{for:"",class:"font-bold block"}," Petugas ",-1)),i(n,{modelValue:o(t).petugas,"onUpdate:modelValue":e[5]||(e[5]=l=>o(t).petugas=l),placeholder:"Nama Petugas",maxlength:"50",class:"w-full",name:"petugas"},null,8,["modelValue"]),(P=r.petugas)!=null&&P.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.petugas.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)])]),a("div",be,[a("div",ke,[e[14]||(e[14]=a("label",{for:"",class:"font-bold block"}," Alur Perawatan ",-1)),i(M,{modelValue:o(t).alur,"onUpdate:modelValue":e[6]||(e[6]=l=>o(t).alur=l),rows:"6",style:{resize:"none"},class:"w-full",name:"alur"},null,8,["modelValue"]),(B=r.alur)!=null&&B.invalid?(d(),f(u,{key:0,severity:"error",size:"small",variant:"simple"},{default:p(()=>{var l;return[b(k((l=r.alur.error)==null?void 0:l.message),1)]}),_:2},1024)):m("",!0)]),a("div",ye,[e[15]||(e[15]=a("label",{for:"",class:"font-bold block"}," Trouble/Masalah (opsional) ",-1)),i(M,{modelValue:o(t).problem,"onUpdate:modelValue":e[7]||(e[7]=l=>o(t).problem=l),rows:"6",style:{resize:"none"},class:"w-full",name:"problem"},null,8,["modelValue"])])]),a("div",xe,[a("div",we,[e[16]||(e[16]=a("label",{for:"",class:"font-bold block"}," Foto Sebelum (opsional) ",-1)),i(o(A),{mode:"basic",onSelect:O,customUpload:"",auto:"",severity:"secondary",class:"p-button-outlined mb-3",accept:".png,.jpg,.jpeg"}),_.value?(d(),f(V,{key:0,type:"button",label:"Hapus",severity:"warn",icon:"pi pi-trash",class:"mb-5",raised:"",onClick:G,disabled:g.value},null,8,["disabled"])):m("",!0),y.value?(d(),D("img",{key:1,src:y.value,alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,_e)):m("",!0)]),a("div",je,[e[17]||(e[17]=a("label",{for:"",class:"font-bold block"}," Foto Sesudah (opsional) ",-1)),i(o(A),{mode:"basic",onSelect:K,customUpload:"",auto:"",severity:"secondary",class:"p-button-outlined mb-3",accept:".png,.jpg,.jpeg"}),j.value?(d(),f(V,{key:0,type:"button",label:"Hapus",severity:"warn",icon:"pi pi-trash",class:"mb-5",raised:"",onClick:q})):m("",!0),x.value?(d(),D("img",{key:1,src:x.value,alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,Ve)):m("",!0)])]),a("div",Te,[i(X)]),a("div",Ce,[a("div",De,[i(V,{type:"button",label:"Reset",severity:"secondary",class:"flex w-3/12 btn-block mr-5",icon:"pi pi-times",raised:"",onClick:C,disabled:g.value},null,8,["disabled"]),i(V,{type:"submit",label:g.value?"Menyimpan":"Simpan",severity:"success",class:"flex w-3/12 btn-block",icon:g.value?"pi pi-spin pi-spinner":"pi pi-save",raised:"",disabled:g.value},null,8,["label","icon","disabled"])])])]}),_:1},8,["resolver","initialValues"])])],64)}}};export{ze as default};
