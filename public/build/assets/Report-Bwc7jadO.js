import{k as W,l as m,G as X,x as Z,r as u,i as ll,f as V,o as Y,a as t,u as s,s as el,g as al,w as i,b as a,t as f,e as C,j as tl,as as ol,at as sl,h as F,F as nl,au as h}from"./app-B8y3jIa7.js";import{h as c}from"./moment-C5S46NFB.js";import"./id-C3sGPiMz.js";const il={class:"mt-5"},dl={class:"flex justify-between"},ul={class:"flex w-6/12 gap-4"},rl={class:"w-full text-center"},ml={class:"flex items-center gap-4 border border-primary bg-transparent rounded-full w-full py-1 px-2 justify-between"},fl={class:"text-color font-medium"},cl={class:"hidden sm:block"},pl={class:"block sm:hidden"},vl={class:"flex flex-col md:flex-row"},gl={class:"w-full md:w-5/12 flex flex-col gap-4"},bl={class:"card flex flex-wrap gap-4 w-45"},xl={class:"flex-auto"},wl={class:"flex-auto"},_l={class:"card flex flex-wrap gap-4 -mt-20"},kl={class:"flex-auto"},yl={class:"card flex flex-wrap gap-4 -mt-20"},hl={class:"flex-auto"},Dl={class:"card flex flex-wrap gap-4 -mt-20"},Ml={class:"flex-auto"},Vl={class:"flex-auto"},Yl={class:"w-full md:w-2/12"},Cl={class:"w-full md:w-5/12 flex flex-col gap-4"},jl={class:"card flex flex-wrap gap-4"},Tl={class:"flex-auto"},Fl={class:"flex-auto"},Ul={key:0,class:"card flex flex-row gap-4 -mt-20"},Sl={class:"basis-1/2 justify-items-center"},Il=["src"],Nl={class:"basis-1/2 justify-items-center"},Pl=["src"],Bl={class:"flex flex-col md:flex-row mt-20"},Ll={class:"w-full flex flex-col gap-4"},Ol={class:"card flex flex-wrap gap-4 -mt-20 justify-items-center"},Al={class:"flex-auto text-center"},El={__name:"Report",props:{lists:Object},setup(L){W();const b=L;c.locale("id");const U=m(!0),p=m(Array()),j=()=>{p.value=[],b.lists.length>0&&b.lists.map(n=>{p.value.push(n)}),U.value=!1};X(()=>{j(),o.reset()}),j();const o=Z({uuid:"",mulai:null,jam:null,judul:null,deskripsi:"",lokasi:"",alur:null,problem:null,petugas:"",foto_awal:null,foto_akhir:null}),D=m(!1),x=m(!1),w=m(!1),k=m(),M=m(null),O=new Date;m(),m([{name:"Lokal Kominfo-Setda",value:"lokal"},{name:"Intra OPD",value:"opd"},{name:"Metro Kecamatan",value:"metro"},{name:"Internet",value:"internet"},{name:"Petugas",value:"petugas"}]);const S=()=>{k.value={global:{value:null,matchMode:h.CONTAINS},tgl_mulai:{value:null,matchMode:h.EQUALS},judul:{value:null,matchMode:h.CONTAINS},lokasi:{value:null,matchMode:h.CONTAINS},petugas:{value:null,matchMode:h.CONTAINS}}};S();const A=()=>{S(),M.value=null,j()},$=n=>{const[l,_]=n;!l&&!_?p.value=b.lists:l&&!_?(console.log("start",c(l).format("YYYY-MM-DD")),b.lists.length>0?p.value=b.lists.filter(r=>{const y=c(l).format("YYYY-MM-DD"),d=c(r.tanggal_mulai).format("YYYY-MM-DD");return y===d}):p.value=[]):l&&_&&(b.lists.length>0?p.value=b.lists.filter(r=>{const y=c(l).format("YYYY-MM-DD"),d=c(_).format("YYYY-MM-DD"),v=c(r.tanggal_mulai).format("YYYY-MM-DD");return v>=y&&v<=d}):p.value=[])},J=()=>{M.value=null},z=n=>{n&&(x.value=!1,w.value=!1,o.mulai=c(n.tanggal_mulai).format("DD MMMM YYYY"),o.jam=n.jam_mlai,o.judul=n.judul,o.deskripsi=n.deskripsi,o.lokasi=n.lokasi,o.alur=n.alur_perawatan,o.problem=n.problem,o.petugas=n.petugas,n.foto_sebelum&&(x.value=n.foto_sebelum),n.foto_setelah&&(w.value=n.foto_setelah),D.value=!0)},I=n=>!1;return(n,l)=>{const _=u("ConfirmDialog"),r=u("Button"),y=u("DatePicker"),d=u("InputText"),v=u("Column"),E=u("DataTable"),K=u("Card"),N=u("Divider"),P=u("Textarea"),G=u("Dialog"),H=ll("tooltip");return Y(),V(nl,null,[t(s(el)),t(_),t(s(al),{title:"Laporan Maintenance"}),t(K,{class:"w-full"},{title:i(()=>l[15]||(l[15]=[a("i",{class:"pi pi-book"},null,-1),C(" Laporan Maintenance")])),content:i(()=>[a("div",il,[t(E,{filters:k.value,"onUpdate:filters":l[4]||(l[4]=e=>k.value=e),value:p.value,paginator:"",showGridlines:"",rows:15,rowsPerPageOptions:[5,10,15,20,50],tableStyle:"min-width: 50rem",filterDisplay:"menu",dataKey:"id",loading:U.value,globalFilterFields:["tgl_mulai","judul","lokasi","petugas"]},{header:i(()=>[a("div",dl,[a("div",ul,[t(r,{type:"button",icon:"pi pi-filter-slash",label:"Bersihkan Filter",outlined:"",onClick:l[0]||(l[0]=e=>A())}),t(y,{modelValue:M.value,"onUpdate:modelValue":l[1]||(l[1]=e=>M.value=e),selectionMode:"range",manualInput:!1,dateFormat:"dd/mm/yy",placeholder:"Filter Tanggal",maxDate:s(O),showButtonBar:"",onValueChange:l[2]||(l[2]=e=>$(e)),onClearClick:J,class:"w-4/12"},null,8,["modelValue","maxDate"])]),t(s(ol),null,{default:i(()=>[t(s(sl),null,{default:i(()=>l[16]||(l[16]=[a("i",{class:"pi pi-search"},null,-1)])),_:1,__:[16]}),t(d,{modelValue:k.value.global.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k.value.global.value=e),placeholder:"Pencarian"},null,8,["modelValue"])]),_:1})])]),empty:i(()=>l[17]||(l[17]=[a("div",{class:"w-full text-center"},"Tidak ada data.",-1)])),loading:i(()=>l[18]||(l[18]=[a("div",{class:"w-full text-center"},"Memproses data. Harap menunggu.",-1)])),paginatorcontainer:i(({first:e,last:g,page:T,pageCount:B,prevPageCallback:Q,nextPageCallback:R,totalRecords:q})=>[a("div",ml,[t(r,{icon:"pi pi-chevron-left",rounded:"",text:"",onClick:Q,disabled:T===0},null,8,["onClick","disabled"]),a("div",fl,[a("span",cl,"Showing "+f(e)+" to "+f(g)+" of "+f(q),1),a("span",pl,"Page "+f(T+1)+" of "+f(B),1)]),t(r,{icon:"pi pi-chevron-right",rounded:"",text:"",onClick:R,disabled:T===B-1},null,8,["onClick","disabled"])])]),default:i(()=>[t(v,{field:"tanggal_mulai",header:"Tanggal Mulai",style:{width:"15%"}},{body:i(e=>[a("label",null,f(s(c)(e.data.tanggal_mulai).format("DD MMM YYYY")+" "+e.data.jam_mulai),1)]),_:1}),t(v,{field:"judul",header:"Judul",style:{width:"20%"},showFilterMatchModes:!1},{body:i(({data:e})=>[C(f(e.judul),1)]),filter:i(({filterModel:e})=>[t(d,{modelValue:e.value,"onUpdate:modelValue":g=>e.value=g,type:"text",placeholder:"Cari judul"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(v,{field:"lokasi",header:"Lokasi",style:{width:"20%"},showFilterMatchModes:!1},{body:i(({data:e})=>[C(f(e.lokasi),1)]),filter:i(({filterModel:e})=>[t(d,{modelValue:e.value,"onUpdate:modelValue":g=>e.value=g,type:"text",placeholder:"Cari lokasi"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(v,{field:"petugas",header:"Petugas",style:{width:"25%"},showFilterMatchModes:!1},{body:i(({data:e})=>[C(f(e.petugas),1)]),filter:i(({filterModel:e})=>[t(d,{modelValue:e.value,"onUpdate:modelValue":g=>e.value=g,type:"text",placeholder:"Cari petugas"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(v,{header:"Opsi",style:{width:"15%","text-align":"right"},class:"justify-items-center"},{body:i(e=>[a("div",rl,[tl(t(r,{icon:"pi pi-search",onClick:g=>z(e.data),severity:"secondary",rounded:""},null,8,["onClick"]),[[H,"Lihat Detail",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["filters","value","loading"])])]),_:1}),t(G,{visible:D.value,"onUpdate:visible":l[14]||(l[14]=e=>D.value=e),maximizable:"",modal:"",header:"Detail Maintenance",style:{width:"90rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:i(()=>[a("div",vl,[a("div",gl,[a("div",bl,[a("div",xl,[l[19]||(l[19]=a("label",{for:"",class:"font-bold block"}," Tanggal Mulai ",-1)),t(d,{modelValue:s(o).mulai,"onUpdate:modelValue":l[5]||(l[5]=e=>s(o).mulai=e),placeholder:"Tanggal Mulai",class:"w-full",readonly:""},null,8,["modelValue"])]),a("div",wl,[l[20]||(l[20]=a("label",{for:"petugas",class:"font-bold block"}," Jam Mulai ",-1)),t(d,{modelValue:s(o).jam,"onUpdate:modelValue":l[6]||(l[6]=e=>s(o).jam=e),placeholder:"Jam Mulai",class:"w-full",readonly:""},null,8,["modelValue"])])]),a("div",_l,[a("div",kl,[l[21]||(l[21]=a("label",{for:"",class:"font-bold block"}," Judul ",-1)),t(d,{value:s(o).judul,placeholder:"Judul",class:"w-full",readonly:""},null,8,["value"])])]),a("div",yl,[a("div",hl,[l[22]||(l[22]=a("label",{for:"",class:"font-bold block"}," Deskripsi ",-1)),t(d,{modelValue:s(o).deskripsi,"onUpdate:modelValue":l[7]||(l[7]=e=>s(o).deskripsi=e),placeholder:"Deskripsi",class:"w-full",readonly:""},null,8,["modelValue"])])]),a("div",Dl,[a("div",Ml,[l[23]||(l[23]=a("label",{for:"",class:"font-bold block"}," Lokasi ",-1)),t(d,{value:s(o).lokasi,placeholder:"Lokasi",class:"w-full",readonly:""},null,8,["value"])]),a("div",Vl,[l[24]||(l[24]=a("label",{for:"",class:"font-bold block"}," Petugas ",-1)),t(d,{modelValue:s(o).petugas,"onUpdate:modelValue":l[8]||(l[8]=e=>s(o).petugas=e),placeholder:"Petugas",class:"w-full",readonly:""},null,8,["modelValue"])])])]),a("div",Yl,[t(N,{layout:"vertical",class:"!hidden md:!flex"}),t(N,{layout:"horizontal",class:"!flex md:!hidden",align:"center"})]),a("div",Cl,[a("div",jl,[a("div",Tl,[l[25]||(l[25]=a("label",{for:"",class:"font-bold block"}," Alur Perawatan ",-1)),t(P,{modelValue:s(o).alur,"onUpdate:modelValue":l[9]||(l[9]=e=>s(o).alur=e),rows:"5",style:{resize:"none"},class:"w-full",readonly:""},null,8,["modelValue"])]),a("div",Fl,[l[26]||(l[26]=a("label",{for:"",class:"font-bold block"}," Trouble/Permasalahan ",-1)),t(P,{modelValue:s(o).problem,"onUpdate:modelValue":l[10]||(l[10]=e=>s(o).problem=e),rows:"5",style:{resize:"none"},class:"w-full",readonly:""},null,8,["modelValue"])])]),x.value||w.value?(Y(),V("div",Ul,[a("div",Sl,[l[27]||(l[27]=a("label",{for:"icondisplay",class:"font-bold block"}," Foto Sebelum ",-1)),x.value?(Y(),V("img",{key:0,src:x.value,alt:"Image",class:"shadow-md rounded-xl w-full",onClick:l[11]||(l[11]=e=>I(x.value))},null,8,Il)):F("",!0)]),a("div",Nl,[l[28]||(l[28]=a("label",{for:"icondisplay",class:"font-bold block"}," Foto Sesudah ",-1)),w.value?(Y(),V("img",{key:0,src:w.value,alt:"Image",class:"shadow-md rounded-xl w-full",onClick:l[12]||(l[12]=e=>I(w.value))},null,8,Pl)):F("",!0)])])):F("",!0)])]),a("div",Bl,[a("div",Ll,[a("div",Ol,[a("div",Al,[t(r,{type:"button",label:"Tutup",severity:"secondary",class:"flex md:w-6/12 sm:w-12/12 btn-block",icon:"pi pi-times",raised:"",onClick:l[13]||(l[13]=e=>D.value=!1)})])])])])]),_:1},8,["visible"])],64)}}};export{El as default};
