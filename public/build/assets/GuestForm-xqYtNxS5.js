import{k as Z,J as $,l as i,x as ee,G as ae,r as c,f as se,o as p,a as o,b as a,u as m,s as le,w as r,c as v,h as k,e as x,t as u,F as te}from"./app-B8y3jIa7.js";import{s as ne}from"./index-B7id7D6o.js";import{h as oe,o as ie,s as C,p as j,u as S,d as M,n as B}from"./types-B6ugmKAV.js";import{h as N}from"./moment-C5S46NFB.js";const re={id:"tamu",class:"py-6 px-6 lg:px-20 mt-0 mx-0 lg:mx-40"},ue={class:"card flex flex-wrap gap-4"},me={class:"flex-auto"},de={class:"flex-auto"},ce={class:"card flex flex-wrap gap-4 -mt-20"},pe={class:"flex-auto"},ge={class:"flex-auto"},fe=["onClick"],ve={class:"flex-auto"},ke=["onClick"],xe={class:"card flex flex-wrap gap-4 -mt-20"},be={class:"flex-auto"},ye={class:"card flex flex-wrap gap-4 -mt-20"},_e={class:"flex-auto text-center"},we={class:"grid grid-cols-12 gap-8 mt-5"},Ve={class:"card mb-0"},De={class:"flex justify-between mb-4"},Ie={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Te={class:"card mb-0"},Ce={class:"flex justify-between mb-4"},je={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Se={class:"flex flex-col items-center p-8 bg-surface-0 dark:bg-surface-900 rounded"},Me={class:"font-bold text-2xl block mb-2 mt-6"},Be={class:"mb-0"},Ne={class:"flex items-center gap-2 mt-6"},Pe={__name:"GuestForm",props:{total:Number,today:Number},setup(U){const w=Z(),H=$(),E=U,J=i(new Date),b=i(null),y=i(null),_=i(null),g=i(!1),t=ee({nama:"",instansi:"",tanggal:null,masuk:null,keluar:null,keperluan:""});i(),i([{name:"Lokal Kominfo-Setda",value:"KS"},{name:"Intra OPD",value:"OPD"},{name:"Metro Kecamatan",value:"Metro"},{name:"Internet",value:"Int"},{name:"Petugas",value:"Ptg"}]),i(),i([{name:"On Progress",value:"progress"},{name:"On Monitoring",value:"monitoring"},{name:"Finish",value:"finish"}]);const K=()=>{const l=document.getElementById("tamu");l&&setTimeout(()=>{l.scrollIntoView({behavior:"smooth",block:"start"})},1e3)};ae(()=>{K()});const Y=i({_nama:"",_instansi:"",_tanggal:null,_masuk:null,_keluar:null,_keperluan:""}),q=i(oe(ie({_nama:C().min(1,{message:"Nama Tamu wajib diisi."}),_instansi:C().min(1,{message:"Nama Instansi wajib diisi."}),_tanggal:j(l=>l===""||l===null?null:new Date(l),S([M(),B().refine(l=>l!==null,{message:"Tanggal wajib diisi"})])),_masuk:j(l=>l===""||l===null?null:new Date(l),S([M(),B().refine(l=>l!==null,{message:"Jam Kedatangan wajib diisi"})])),_keluar:j(l=>l===""||l===null?null:new Date(l),S([M(),B().refine(l=>l!==null,{message:"Jam Selesai wajib diisi"})])),_keperluan:C().min(1,{message:"Keperluan wajib diisi."})}))),G=()=>{H.require({group:"headless",header:"Simpan Sekarang?",message:"Pilih tombol konfirmasi untuk melanjutkan.",accept:()=>{Q()},reject:()=>{console.log("canceled")}})},A=({valid:l})=>{b.value?t.tanggal=N(b.value).format("YYYY-MM-DD"):t.tanggal=null,y.value?t.masuk=N(y.value).format("HH:mm"):t.masuk=null,_.value?t.keluar=N(_.value).format("HH:mm"):t.keluar=null,console.log(t.tanggal,l),l&&t.nama&&t.instansi&&t.tanggal&&t.masuk&&t.keluar&&t.keperluan?G():w.add({severity:"error",summary:"Error",detail:"Mohon untuk mengisi semua field",life:3e3})},Q=()=>{const l="/buku-tamu/save-form";g.value=!0,t.post(l,{resetOnSuccess:!0,onSuccess:e=>{e.props.flash.message.status==="success"?(w.add({severity:"success",summary:"Success",detail:"Data berhasil disimpan",life:3e3}),t.reset(),b.value=null,y.value=null,_.value=null,K()):w.add({severity:"error",summary:"Error",detail:"Gagal menyimpan data",life:3e3}),g.value=!1},onError:()=>{w.add({severity:"error",summary:"Error",detail:"Terjadi kegagalan pada sistem",life:3e3}),g.value=!1}})},h=l=>{let e=l.toString();const d=document.getElementById(e);d.classList.contains("is-hover")||d.classList.add("is-hover")},O=l=>{const e=l.toString();document.getElementById(e).classList.remove("is-hover")};return(l,e)=>{const d=c("InputText"),f=c("Message"),I=c("DatePicker"),R=c("Textarea"),T=c("Button"),W=c("Divider"),X=c("ConfirmDialog");return p(),se(te,null,[o(m(le)),a("div",re,[e[24]||(e[24]=a("div",{class:"mt-7"},[a("h1",{class:"text-surface-900 dark:text-surface-0 font-normal mb-2 text-4xl text-center"},"Buku Tamu Data Center Diskominfo Karanganyar")],-1)),o(m(ne),{resolver:q.value,initialValues:Y.value,onSubmit:A,class:"flex flex-col gap-4"},{default:r(n=>{var V,D,P,z,F,L;return[a("div",ue,[a("div",me,[e[10]||(e[10]=a("label",{for:"",class:"font-bold block"}," Nama Lengkap ",-1)),o(d,{modelValue:m(t).nama,"onUpdate:modelValue":e[0]||(e[0]=s=>m(t).nama=s),placeholder:"Nama Lengkap",name:"_nama",class:"w-full"},null,8,["modelValue"]),(V=n._nama)!=null&&V.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._nama.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)]),a("div",de,[e[11]||(e[11]=a("label",{for:"",class:"font-bold block"}," Instansi ",-1)),o(d,{modelValue:m(t).instansi,"onUpdate:modelValue":e[1]||(e[1]=s=>m(t).instansi=s),placeholder:"Nama Instansi",name:"_instansi",class:"w-full"},null,8,["modelValue"]),(D=n._instansi)!=null&&D.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._instansi.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)])]),a("div",ce,[a("div",pe,[e[12]||(e[12]=a("label",{for:"tanggal",class:"font-bold block"}," Tanggal Kedatangan ",-1)),o(I,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),showIcon:"",fluid:"",iconDisplay:"input",maxDate:J.value,dateFormat:"dd/mm/yy",inputId:"tanggal",name:"_tanggal"},null,8,["modelValue","maxDate"]),(P=n._tanggal)!=null&&P.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._tanggal.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)]),a("div",ge,[e[13]||(e[13]=a("label",{for:"masuk",class:"font-bold block"},"Jam Kedatangan ",-1)),o(I,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),showIcon:"",fluid:"",iconDisplay:"input",timeOnly:"",inputId:"masuk",name:"_masuk"},{inputicon:r(s=>[a("i",{class:"pi pi-clock",onClick:s.clickCallback},null,8,fe)]),_:1},8,["modelValue"]),(z=n._masuk)!=null&&z.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._masuk.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)]),a("div",ve,[e[14]||(e[14]=a("label",{for:"keluar",class:"font-bold block"},"Jam Selesai ",-1)),o(I,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=s=>_.value=s),showIcon:"",fluid:"",iconDisplay:"input",timeOnly:"",inputId:"keluar",name:"_keluar"},{inputicon:r(s=>[a("i",{class:"pi pi-clock",onClick:s.clickCallback},null,8,ke)]),_:1},8,["modelValue"]),(F=n._keluar)!=null&&F.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._keluar.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)])]),a("div",xe,[a("div",be,[e[15]||(e[15]=a("label",{for:"",class:"font-bold block"}," Keperluan ",-1)),o(R,{modelValue:m(t).keperluan,"onUpdate:modelValue":e[5]||(e[5]=s=>m(t).keperluan=s),name:"_keperluan",rows:"6",style:{resize:"none"},class:"w-full"},null,8,["modelValue"]),(L=n._keperluan)!=null&&L.invalid?(p(),v(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>{var s;return[x(u((s=n._keperluan.error)==null?void 0:s.message),1)]}),_:2},1024)):k("",!0)])]),a("div",ye,[a("div",_e,[o(T,{type:"submit",label:g.value?"Memproses..":"SIMPAN",icon:g.value?"pi pi-spin pi-spinner":"pi pi-save",severity:"success",class:"w-1/2",raised:"",disabled:g.value},null,8,["label","icon","disabled"])])])]}),_:1},8,["resolver","initialValues"]),o(W,{type:"solid"}),a("div",we,[a("div",{class:"col-span-12 lg:col-span-6 xl:col-span-6",style:{cursor:"pointer"},onMouseover:e[6]||(e[6]=n=>h("total")),onMouseout:e[7]||(e[7]=n=>O("total")),id:"total"},[a("div",Ve,[a("div",De,[a("div",null,[e[16]||(e[16]=a("span",{class:"block text-muted-color font-medium mb-4"},"Total",-1)),a("div",Ie,u(E.total??0),1)]),e[17]||(e[17]=a("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-users text-blue-500 !text-xl"})],-1))]),e[18]||(e[18]=a("span",{class:"text-primary font-medium"},"Total ",-1)),e[19]||(e[19]=a("span",{class:"text-muted-color"},"dari pengunjung keseluruhan",-1))])],32),a("div",{class:"col-span-12 lg:col-span-6 xl:col-span-6",style:{cursor:"pointer"},onMouseover:e[8]||(e[8]=n=>h("daily")),onMouseout:e[9]||(e[9]=n=>O("daily")),id:"daily"},[a("div",Te,[a("div",Ce,[a("div",null,[e[20]||(e[20]=a("span",{class:"block text-muted-color font-medium mb-4"},"Hari Ini",-1)),a("div",je,u(E.today??0),1)]),e[21]||(e[21]=a("div",{class:"flex items-center justify-center bg-orange-100 dark:bg-orange-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[a("i",{class:"pi pi-user-plus text-orange-500 !text-xl"})],-1))]),e[22]||(e[22]=a("span",{class:"text-primary font-medium"},"Total ",-1)),e[23]||(e[23]=a("span",{class:"text-muted-color"},"dari pengunjung hari ini",-1))])],32)])]),o(X,{group:"headless"},{container:r(({message:n,acceptCallback:V,rejectCallback:D})=>[a("div",Se,[e[25]||(e[25]=a("div",{class:"rounded-full bg-primary text-primary-contrast inline-flex justify-center items-center h-24 w-24 -mt-20"},[a("i",{class:"pi pi-question !text-4xl"})],-1)),a("span",Me,u(n.header),1),a("p",Be,u(n.message),1),a("div",Ne,[o(T,{label:"Konfirmasi",onClick:V,class:"w-32"},null,8,["onClick"]),o(T,{label:"Batalkan",outlined:"",onClick:D,class:"w-32"},null,8,["onClick"])])])]),_:1})],64)}}};export{Pe as default};
